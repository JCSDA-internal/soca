test_framework_runtime_config: "--log_level=test_suite"
resolution:
model:
  name: 'SOCA'
  tstep: PT1H
cost_function:
  cost_type: 3D-Var
  window_begin: 2018-04-14T21:00:00Z
  window_length: PT2H
  increment_time: 2018-04-14T21:00:00Z
  variables:
  - cicen
  - hicen
  - hsnon
  - tsfcn
  - qsnon
  - sicnk
  - qicnk
  - socn
  - tocn
  - ssh
  - hocn  
  Jb:
    Background:
      state:
      - read_from_file: 1
        basename: ./INPUT/
        ocn_sfc_filename: MOM.res.nc
        ocn_filename: MOM.res.nc
        ice_filename: ice_model.res.nc
        date: 2018-04-14T22:00:00Z
    Covariance:
      covariance: SocaError
      variable_changes:
      - varchange: BkgErrSOCA
        inputVariables:
          variables:
          - cicen
          - hicen
          - hsnon
          - tsfcn
          - qsnon
          - sicnk
          - qicnk
          - socn
          - tocn
          - ssh
          - hocn  
        outputVariables:
          variables:
          - cicen
          - hicen
          - hsnon
          - tsfcn
          - qsnon
          - sicnk
          - qicnk
          - socn
          - tocn
          - ssh
          - hocn
  Jo:
    ObsTypes:
    - ObsType: InsituTemperature
      ObsData:
        ObsDataOut:
          obsfile: Data/t0n156e_dy.nc
        ObsDataIn:
          obsfile: Data/t0n156e_dy.nc
        obsvalue: ObsVal        
      Covariance:
        covariance: diagonal
        obserror: ObsErr		      
variational:
  iteration:
  - resolution: {}
    linearmodel:
      version: IdTLM
      tstep: PT1H
    ninner: 1
    gradient_norm_reduction: 1e-15
    test: 'on'
    output:
      datadir: Data
      exp: 3dvar
      type: incr1
minimizer:
  algorithm: DRPCG #DRIPCG
output:
  datadir: Data
  exp: 3dvar
  type: an
final:
  diagnostics:
    departures: oman
prints:
  frequency: PT3H
