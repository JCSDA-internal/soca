geometry:
  geom_grid_file: data_static/36x17x25/soca_gridspec.nc
  mom6_input_nml: data_static/36x17x25/input.nml
  fields metadata: data_static/fields_metadata.yml

background:
  read_from_file: 1
  basename: data_static/36x17x25/restarts/
  date: &date 2018-04-15T00:00:00Z
  ocn_filename: MOM.res.nc
  ice_filename: cice.res.nc
  state variables:
  - sea_ice_category_area_fraction
  - sea_ice_category_thickness
  - sea_water_salinity
  - sea_water_potential_temperature
  - sea_surface_height_above_geoid
  - sea_water_cell_thickness
  - ocean_mixed_layer_thickness
  - sea_water_depth

background error:
  covariance model: SABER
  adjoint test: true
  saber central block:
    saber block name: diffusion
    read:
      groups:
      - variables:
        - sea_water_potential_temperature
        - sea_water_salinity
        multivariate strategy: univariate # or duplicated, if dealing with localization instead
                                          # the default is "univariate"
        horizontal:
          filepath: data_generated/parameters_diffusion_lowres/hz_smaller
        vertical:
          levels: 25
          filepath: data_generated/parameters_diffusion_lowres/vt_5lvls
      - variables: [sea_surface_height_above_geoid]
        horizontal:
          filepath: data_generated/parameters_diffusion_lowres/hz_smaller

dirac:
  ixdir: [1, 9, 26, 16, 26, 32, 41, 7, 8, 22]
  iydir: [4, 11, 8, 17, 15, 13, 8, 21, 3, 22]
  izdir: [1,  5,  1,  1,  1,  1,  1,  1,  1,  1]
  ifdir: [1,  1,  3,  2,  1,  1,  1,  4,  5,  5]

output dirac:
  datadir: data_output/
  date: *date
  exp: dirac_diffusion_lowres_%id%
  type: an

test:
  reference filename: testref/dirac_diffusion_lowres.test
  test output filename: testoutput/dirac_diffusion_lowres.test